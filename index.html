<!DOCTYPE html>
<html>
	<head>
		<style>
			body {
				margin: 0;
				min-height: 100vh;
				display: flex;
				justify-content: center;
				align-items: center;
				background: #0f172a;
				font-family: 'Arial Rounded MT Bold', Arial, sans-serif;
				color: white;
				overflow: hidden;
				background-image: url('https://png.pngtree.com/thumb_back/fw800/background/20231127/pngtree-a-mountain-of-gifts-against-the-background-of-christmas-lights-and-image_15295582.jpg');
			}

			.snow {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				pointer-events: none;
				z-index: 1;
			}

			.snow div {
				position: fixed;
				width: 10px;
				height: 10px;
				background: white;
				border-radius: 50%;
				animation: snowfall linear infinite;
				opacity: 0;
			}

			@keyframes snowfall {
				0% {
					transform: translateY(-100vh) translateX(0);
					opacity: 1;
				}
				100% {
					transform: translateY(100vh) translateX(100px);
					opacity: 0;
				}
			}

			.container {
				background: rgba(255, 255, 255, 0.1);
				backdrop-filter: blur(10px);
				border-radius: 20px;
				padding: 2rem;
				max-width: 600px;
				width: 90%;
				box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
				position: relative;
				z-index: 2;
				border: 2px solid rgba(255, 255, 255, 0.2);
			}

			.container::before {
				content: 'üéÑ';
				position: absolute;
				top: -30px;
				left: -20px;
				font-size: 40px;
				animation: bounce 2s infinite;
			}

			.container::after {
				content: 'üéÅ';
				position: absolute;
				bottom: -30px;
				right: -20px;
				font-size: 40px;
				animation: bounce 2s infinite 1s;
			}

			@keyframes bounce {
				0%,
				100% {
					transform: translateY(0);
				}
				50% {
					transform: translateY(-10px);
				}
			}

			.step {
				display: none;
				text-align: center;
				padding: 1rem;
			}

			.step.active {
				display: block;
				animation: fadeIn 0.5s ease-in-out;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(20px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.step img {
				max-width: 100%;
				height: auto;
				border-radius: 10px;
				margin: 1rem 0;
				border: 3px solid #e11d48;
				box-shadow: 0 0 20px rgba(225, 29, 72, 0.3);
			}

			.navigation {
				display: flex;
				justify-content: space-between;
				margin-top: 2rem;
			}

			button {
				background: linear-gradient(135deg, #e11d48 0%, #be123c 100%);
				color: white;
				border: none;
				padding: 0.8rem 1.5rem;
				border-radius: 25px;
				cursor: pointer;
				font-size: 1rem;
				transition: all 0.3s;
				text-transform: uppercase;
				letter-spacing: 1px;
				font-weight: bold;
			}

			button:hover:not(:disabled) {
				transform: translateY(-2px) scale(1.05);
				box-shadow: 0 4px 20px rgba(225, 29, 72, 0.4);
			}

			button:disabled {
				background: #64748b;
				cursor: not-allowed;
				transform: none;
				box-shadow: none;
			}

			input {
				padding: 1rem;
				border-radius: 12px;
				border: 2px solid rgba(255, 255, 255, 0.2);
				background: rgba(255, 255, 255, 0.1);
				color: white;
				width: 80%;
				margin: 1rem 0;
				font-size: 1.1rem;
				text-align: center;
			}

			input::placeholder {
				color: rgba(255, 255, 255, 0.5);
			}

			.progress {
				height: 6px;
				background: rgba(255, 255, 255, 0.1);
				border-radius: 3px;
				margin: 1rem 0;
				overflow: hidden;
			}

			.progress-bar {
				height: 100%;
				background: linear-gradient(90deg, #22c55e 0%, #15803d 100%);
				transition: width 0.3s ease;
			}

			h2 {
				color: #f8fafc;
				text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
				margin-bottom: 1.5rem;
			}

			.cipher-box {
				background: rgba(0, 0, 0, 0.2);
				padding: 1rem;
				border-radius: 10px;
				margin: 1rem 0;
				font-family: monospace;
				font-size: 1.2rem;
				letter-spacing: 2px;
			}

			#confetti {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				pointer-events: none;
				z-index: 3;
			}
		</style>
	</head>
	<body>
		<div class="snow" id="snow"></div>
		<div class="container">
			<div class="progress">
				<div class="progress-bar"></div>
			</div>
			<div id="stepContainer"></div>
			<div class="navigation">
				<button id="prevBtn" onclick="navigate(-1)">Previous</button>
				<button id="nextBtn" onclick="navigate(1)">Next</button>
			</div>
		</div>
		<canvas id="confetti"></canvas>

		<script>
			// Caesar cipher functions
			function caesarCipher(str, shift) {
				return str
					.split('')
					.map((char) => {
						if (char.match(/[a-z]/i)) {
							const code = char.charCodeAt(0);
							const isUpperCase = code >= 65 && code <= 90;
							const base = isUpperCase ? 65 : 97;
							return String.fromCharCode(((((code - base + shift) % 26) + 26) % 26) + base);
						}
						return char;
					})
					.join('');
			}

			// Define your steps here
			const steps = [
				{
					text: 'üéÑ Welcome to Your Special Christmas Gift Reveal! üéÅ',
					image: '/api/placeholder/400/300',
					description: 'Get ready for a festive adventure to discover your gift!',
				},
				{
					text: 'First Challenge: Decode the Secret Message!',
					description: 'This message has been shifted by 3 letters in the alphabet. Can you decode it?',
					cipher: caesarCipher('Your gift is warm and cozy', 3),
					input: {
						placeholder: 'Enter the decoded message...',
						correct: 'Your gift is warm and cozy',
					},
				},
				{
					text: 'First Challenge: Decode the Secret Message!',
					description: 'This message has been shifted by 3 letters in the alphabet. Can you decode it?',
					cipher: caesarCipher('Your gift is warm and cozy', 3),
					input: {
						placeholder: 'Enter the decoded message...',
						correct: 'Your gift is warm and cozy',
					},
				},
				{
					text: "What's black and white and warm all over?",
					input: {
						placeholder: 'Guess what it might be...',
						correct: 'hoodie',
					},
				},
				{
					text: "üéâ Congratulations! You've discovered your gift! üéÅ",
					description: "It's a brand new hoodie! I hope you'll love wearing it!",
					image: '/api/placeholder/400/300',
					final: true,
				},
			];

			let currentStep = 0;

			// Create snowflakes
			function createSnow() {
				const snowContainer = document.getElementById('snow');
				for (let i = 0; i < 50; i++) {
					const snowflake = document.createElement('div');
					snowflake.style.left = Math.random() * 100 + 'vw';
					snowflake.style.animationDuration = Math.random() * 3 + 2 + 's';
					snowflake.style.opacity = Math.random();
					snowflake.style.width = snowflake.style.height = Math.random() * 5 + 5 + 'px';
					snowContainer.appendChild(snowflake);
				}
			}

			// Confetti animation for the final reveal
			function createConfetti() {
				const canvas = document.getElementById('confetti');
				const ctx = canvas.getContext('2d');
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;

				const pieces = [];
				const numberOfPieces = 200;
				const colors = [
					'#f44336',
					'#e91e63',
					'#9c27b0',
					'#673ab7',
					'#3f51b5',
					'#2196f3',
					'#03a9f4',
					'#00bcd4',
					'#009688',
					'#4CAF50',
				];

				for (let i = 0; i < numberOfPieces; i++) {
					pieces.push({
						x: Math.random() * canvas.width,
						y: Math.random() * canvas.height - canvas.height,
						rot: Math.random() * 360,
						sp: Math.random() * 6 + 3,
						color: colors[Math.floor(Math.random() * colors.length)],
					});
				}

				function animate() {
					ctx.clearRect(0, 0, canvas.width, canvas.height);

					pieces.forEach((p) => {
						p.y += p.sp;
						p.rot += p.sp / 2;
						if (p.y > canvas.height) p.y = -20;

						ctx.save();
						ctx.translate(p.x, p.y);
						ctx.rotate((p.rot * Math.PI) / 180);

						ctx.fillStyle = p.color;
						ctx.fillRect(-5, -5, 10, 10);

						ctx.restore();
					});

					requestAnimationFrame(animate);
				}

				animate();
			}

			function createStepElement(step, index) {
				const div = document.createElement('div');
				div.className = `step ${index === 0 ? 'active' : ''}`;

				const title = document.createElement('h2');
				title.textContent = step.text;
				div.appendChild(title);

				if (step.description) {
					const desc = document.createElement('p');
					desc.textContent = step.description;
					div.appendChild(desc);
				}

				if (step.cipher) {
					const cipherBox = document.createElement('div');
					cipherBox.className = 'cipher-box';
					cipherBox.textContent = step.cipher;
					div.appendChild(cipherBox);
				}

				if (step.image) {
					const img = document.createElement('img');
					img.src = step.image;
					img.alt = `Step ${index + 1}`;
					div.appendChild(img);
				}

				if (step.input) {
					const input = document.createElement('input');
					input.type = 'text';
					input.placeholder = step.input.placeholder;
					input.addEventListener('input', (e) => validateInput(e.target.value, step.input.correct));
					div.appendChild(input);
				}

				return div;
			}

			function validateInput(value, correct) {
				const nextBtn = document.getElementById('nextBtn');
				nextBtn.disabled = value.toLowerCase().trim() !== correct.toLowerCase();
			}

			function navigate(direction) {
				const container = document.getElementById('stepContainer');
				const steps = container.getElementsByClassName('step');

				steps[currentStep].classList.remove('active');
				currentStep += direction;
				steps[currentStep].classList.add('active');

				if (steps[currentStep].querySelector('input')) {
					steps[currentStep].querySelector('input').value = '';
				}

				if (currentStep === steps.length - 1) {
					createConfetti();
				}

				updateButtons();
				updateProgressBar();
			}

			function updateButtons() {
				const prevBtn = document.getElementById('prevBtn');
				const nextBtn = document.getElementById('nextBtn');

				prevBtn.disabled = currentStep === 0;
				nextBtn.disabled = currentStep === steps.length - 1;

				const currentStepData = steps[currentStep];
				if (currentStepData.input) {
					const input = document.querySelector('.step.active input');
					validateInput(input.value, currentStepData.input.correct);
				}
			}

			function updateProgressBar() {
				const progress = (currentStep / (steps.length - 1)) * 100;
				document.querySelector('.progress-bar').style.width = `${progress}%`;
			}

			// Initialize
			window.onload = function () {
				const container = document.getElementById('stepContainer');
				steps.forEach((step, index) => {
					container.appendChild(createStepElement(step, index));
				});
				updateButtons();
				updateProgressBar();
				createSnow();
			};
		</script>
	</body>
</html>
